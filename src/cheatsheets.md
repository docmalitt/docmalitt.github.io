# Cheatsheet
### ðŸ“‘ Cheatsheet:
##### BOOT, REBOOT, AND SHUT DOWN A SYSTEM NORMALLY
- `systemctl reboot` âž¡ *shut down and reboot the system.*
- `systemctl halt` âž¡ *shut down and halt the system (stops CPU but keeps it powered).*
- `systemctl poweroff` âž¡ *shut down and poweroff the system (stops CPU and turns off the power).*
##### BOOT SYSTEMS INTO DIFFERENT TARGETS MANUALLY
- `systemctl get-default` âž¡ *get the default boot target.*
- `systemctl set-default multi-user` âž¡ *set the default boot target.*
- `systemctl --type target --all` âž¡ *list all target units (loaded or not).*
- Interrupt boot process to temporarily boot from another target (i.e.: `multi.user.target`), without changing the default target:
	- *append* `systemd.unit=multi-user.target` âž¡ *to the end of the boot cmd, when editing the grub menu entry, and start it with Ctrl+x.*
##### INTERRUPT THE BOOT PROCESS IN ORDER TO GAIN ACCESS TO A SYSTEM
- Reset root pwd in 7 steps:
	- *append* `rd.break` âž¡ *to the end of the boot cmd, when editing the grub menu entry, and start it with Ctrl+x.*
	- `chroot /sysroot` âž¡ *make the mounted (read-only) root file system (`/sysroot`) appear as mounted on `/`.*
	- `mount -o remount,rw /` âž¡ *remount root file system in read/write mode for the `passwd` cmd to be able to modify the shadow file with a new pwd.*
	- `passwd` âž¡ *change password for the root user.*
	- `touch .autorelabel` âž¡ *create `.autorelabel` file to instruct the OS to run SELinux relabeling on all files on the next reboot (including the `shadow` that was updated).*
	- `exit` âž¡ *the `chroot` shell.*
	- `reboot` âž¡ *the system.*
	- Extra Step: `mandb` âž¡ *after restart, rebuild manual pages db.*
- Install most recent kernel, without removing/updating previous kernel (7 files):
	- `linux-firmware`
	- `kernel`
	- `kernel-core`
	- `kernel-headers`
	- `kernel-modules`
	- `kernel-tools`
	- `kernel-tools-libs`
- `dnf list installed kernel*` âž¡ *list installed kernels.*
- `cat /boot/grub2/grubenv` âž¡ *check if new installed kernel is default boot option.*
##### IDENTIFY CPU/MEMORY INTENSIVE PROCESSES AND KILL PROCESSES
- `tar -czf home.tar.gz . &` âž¡ *start `tar` as background process in the current shell.*
- `jobs` âž¡ *list backgrund processes in the current shell.*
- `ps -aux` âž¡ *list every process in the system.*
- `ps -eo pid,nice,cmd | grep top` âž¡ *show `pid` and `nice` for the `top` âž¡ running process.*
- `kill -sigstop 3251` âž¡ *send stop signal to process.*
##### ADJUST PROCESS SCHEDULING
- `nice -n +8 top` âž¡ *run `top` cmd with a lower priority (by 8).*
- `renice -n -10 -p 3261` âž¡ *increase the priority of the `3261` running proccess to `-10`.*
- `crontab -e` âž¡ *edit user `crontab`.*
- `23 8 * * * echo "Hello World" > /dev/pts/0` âž¡ *in a `crontab` file, this entry will make the terminal `/dev/pts/0` print the message everyday at 8:23.*
- `cat /var/log/cron` âž¡ *cron execution logs.*
##### MANAGE TUNING PROFILES
- `tuned-adm profile`, `tuned-adm list`âž¡ *list all available system tuning profiles.*
- `tuned-adm active` âž¡ *show current system tuning profile.*
- `tuned-adm recommend` âž¡ *list recommended system tuning profile.*
- `tuned-adm profile balanced` âž¡ *set system profile to `balanced`.*
##### LOCATE AND INTERPRET SYSTEM LOG FILES AND JOURNALS
- `cat /etc/rsyslog.conf` âž¡ *see directories defined to save the log files generated by `rsyslog`.*
- `tail -f /var/log/secure` âž¡ *live view of the `secure` log file.*
- `tail /var/log/audit/audit.log` âž¡ *view SELinux related logs.*
- `journalctl --since 10:00` âž¡ *view `journal` logs from 10:00 until now.*
- `journalctl --unit sshd.service -o verbose` âž¡ *view `journal` logs related to `sshd.service` displaying additional parameters.*
- `journalctl --priority crit` âž¡ *view critial priority logs.*
- `logger "$LOGNAME is delivering this message at $(date)"` âž¡ *write custom log message to `/var/log/messages`.*
##### PRESERVE SYSTEM JOURNALS
- Preserve system journals:
	- `mkdir -p /var/log/journal`
	- `systemctl restart systemd-journald`
- `journalctl -b -1` âž¡ *view log messages from previous boot.*
- `item` âž¡ *description.*
##### START, STOP, AND CHECK THE STATUS OF NETWORK SERVICES
- `systemctl status sshd.service` âž¡ *verify if `sshd` general status.*
- `systemctl enable sshd.service` âž¡ *make `sshd` start at system startup.*
- `systemctl disable sshd.service` âž¡ *make `sshd` do not start at system startup.*
- `systemctl start sshd.service` âž¡ *make `sshd` start temporarily (this system do not persist reboots).*
- `systemctl disable sshd.service` âž¡ *make `sshd` stop temporarily (this setting do not persist reboots).*
##### SECURELY TRANSFER FILES BETWEEN SYSTEMS
- `scp srv2:/etc/chrony.conf /tmp` âž¡ *get file from `srv2`.*
- `scp -r /etc/sysconfig srv2:/tmp` âž¡ *transfer entire directory to `srv2`.*
- `scp -p file1.txt srv2:/tmp` âž¡ *transfer file to `srv2` `/tmp` directory preserving file attributes (permissions, etc).*


